function toggleAllCharRows(charType){if("hiragana"!==charType&&"katakana"!==charType)return void console.error("Invalid charType in characterSelect.");const selectAllCheck=document.getElementById(charType+"-select-all"),charTable=document.getElementById(charType+"-table"),checkList=charTable.getElementsByTagName("tbody")[0].getElementsByClassName("char-select");for(let check of checkList)check.checked!=selectAllCheck.checked&&check.click()}function toggleCharRow(event){if(!["INPUT","LABEL","SMALL","DIV"].includes(event.target.tagName)){const checkBoxes=this.getElementsByClassName("char-select");for(let check of checkBoxes)check.click()}}function initializeCharTableEvents(){document.getElementById("hiragana-select-all").addEventListener("click",()=>{toggleAllCharRows("hiragana")}),document.getElementById("katakana-select-all").addEventListener("click",()=>{toggleAllCharRows("katakana")});const checkList=document.getElementsByClassName("char-select");for(let check of checkList)check.id.includes("select-all")||check.addEventListener("click",characterRowSelect),check.disabled=!1;let tableRows=document.getElementsByClassName("char-table-row");for(let row of tableRows)row.addEventListener("click",toggleCharRow)}function characterRowSelect(){let charVal=this.getAttribute("charVal"),charType=this.getAttribute("charType");if("hiragana"!==charType&&"katakana"!==charType)return void console.error("Invalid charType in characterRowSelect.");let stored=localStorage.getItem("string");stored?this.checked&&!stored.includes(charVal)?(localStorage.setItem("string",stored+charVal),setSelectAllState()):(localStorage.setItem("string",stored.replace(charVal,"")),document.getElementById(charType+"-select-all").checked=!1):localStorage.setItem("string",charVal)}function initializeCheckboxes(){const checkBoxes=document.getElementsByClassName("char-select");let stored=localStorage.getItem("string");if(stored)for(let box of checkBoxes){let charVal=box.getAttribute("charVal");stored.includes(charVal)&&(box.checked=!0)}}function setSelectAllState(){const checkBoxes=document.getElementsByClassName("char-select");let hiraSelectAll=!0,kataSelectAll=!0;for(let box of checkBoxes)if(!box.checked)switch(box.getAttribute("charType")){case"hiragana":hiraSelectAll=!1;break;case"katakana":kataSelectAll=!1}hiraSelectAll&&(document.getElementById("hiragana-select-all").checked=!0),kataSelectAll&&(document.getElementById("katakana-select-all").checked=!0)}function init(){initializeCharTableEvents(),initializeCheckboxes(),setSelectAllState()}window.onload=init;